{"version":3,"sources":["images/phonebook.png","views/HomeView.js","Components/Common/Navigation/Navigation.js","Components/Common/UserMenu/UserMenu.js","Components/Common/AuthNav/AuthNav.js","Components/Common/AppBar/AppBar.js","Components/Authorization/PrivateRoute/PrivateRoute.js","Components/Authorization/PublicRoute/PublicRoute.js","App.js","redux/store.js","index.js","redux/phonebook/contacts-actions.js","Components/Common/AuthNav/AuthNav.module.css","Components/Common/Navigation/Navigation.module.css","Components/Common/UserMenu/UserMenu.module.css","views/HomeView.module.css","Components/Common/AppBar/AppBar.module.css","redux/phonebook/contacts-reducer.js","redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js"],"names":["HomeView","className","styles","home","heading","src","image","alt","width","Navigation","isLoggedIn","useSelector","authSelectors","getIsLoggedIn","navigation","to","link","activeClassName","activeLink","icon","UserMenu","dispatch","useDispatch","email","getUserEmail","userMenu","type","logOutButton","onClick","authOperations","logOut","AuthNav","exact","activeStyle","pageName","AppBar","header","nav","PrivateRoute","children","redirectTo","routeProps","PublicRoute","component","shouldRedirect","restricted","RegisterView","lazy","LoginView","ContactsView","App","isFetchingCurrentUser","getIsFetchingCurrentUser","useEffect","fetchCurrentUser","fallback","color","height","path","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","logger","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","auth","persistReducer","authReducer","contacts","contactsReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById","fetchContactRequest","createAction","fetchContactSuccess","fetchContactError","addContactRequest","addContactSuccess","addContactError","deleteContactRequest","deleteContactSuccess","deleteContactError","updateContactRequest","updateContactSuccess","updateContactError","changeFilter","module","exports","actions","items","createReducer","_","payload","state","filter","contact","id","map","name","number","error","combineReducers","axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","thunkAPI","a","post","data","rejectWithValue","message","logIn","operations","getState","persistedToken","get","getUserName","user","getAuthError","authError","getRegError","regError","authSlice","createSlice","initialState","extraReducers","fulfilled","action","rejected","pending"],"mappings":"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","file":"static/js/main.7aa846d1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/phonebook.b96dcc85.png\";","import styles from './HomeView.module.css';\r\nimport image from '../images/phonebook.png';\r\n\r\nexport default function HomeView() {    \r\n    return(\r\n    <section className={styles.home}>\r\n        <h2 className={styles.heading}>Welcome to your most convenient phonebok :)</h2>\r\n        <img src={image} alt=\"phonebook\" width=\"300\"/>\r\n    </section>)\r\n}","import { NavLink } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport styles from './Navigation.module.css';\r\nimport { authSelectors } from \"../../../redux/auth\";\r\nimport { AiOutlineRead, AiFillHome } from \"react-icons/ai\";\r\n\r\nconst Navigation = () => {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <nav className={styles.navigation}>\r\n      <NavLink to=\"/\" className={styles.link} activeClassName={styles.activeLink}>\r\n        <div className={styles.icon}><AiFillHome/></div>\r\n        <span>Home page</span>\r\n      </NavLink>\r\n\r\n      {isLoggedIn && (\r\n      <NavLink to=\"/contacts\" className={styles.link} activeClassName={styles.activeLink}>\r\n          <div className={styles.icon}><AiOutlineRead/></div>\r\n          <span>Contacts page</span>\r\n      </NavLink>)}\r\n    </nav>\r\n)};\r\n\r\nexport default Navigation;","import { useSelector, useDispatch } from 'react-redux';\r\nimport { authSelectors, authOperations } from '../../../redux/auth';\r\nimport styles from './UserMenu.module.css';\r\nimport { AiOutlineLogout } from \"react-icons/ai\";\r\n\r\nconst UserMenu = () => {\r\n  const dispatch = useDispatch();\r\n  const email = useSelector(authSelectors.getUserEmail);\r\n\r\n  return (\r\n  <div className={styles.userMenu}>\r\n    <span className={styles.email}>{email}</span>\r\n    \r\n    <button type=\"button\" className={styles.logOutButton} onClick={() => dispatch(authOperations.logOut())}> \r\n      \r\n      <div className={styles.icon}><AiOutlineLogout /></div> \r\n      <p className={styles.link}>Log out</p> \r\n    </button>\r\n  </div>\r\n)};\r\n\r\nexport default UserMenu;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport styles from './AuthNav.module.css';\r\nimport { AiOutlineUserAdd, AiOutlineUserSwitch } from \"react-icons/ai\";\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div>\r\n      <NavLink to=\"/register\" exact className={styles.link} activeStyle={styles.activeLink}>\r\n        <div className={styles.icon}><AiOutlineUserAdd /></div>\r\n        <span className={styles.pageName}>\r\n        Registration page\r\n        </span>\r\n      </NavLink>\r\n      <NavLink to=\"/login\" exact className={styles.link} activeStyle={styles.activeLink}>\r\n        <div className={styles.icon}><AiOutlineUserSwitch /></div>\r\n        <span className={styles.pageName}>\r\n        Login page</span>\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}","import { useSelector } from \"react-redux\";\r\nimport Navigation from \"../Navigation/Navigation\";\r\nimport UserMenu from '../UserMenu/UserMenu';\r\nimport AuthNav from '../AuthNav/AuthNav';\r\nimport { authSelectors } from \"../../../redux/auth\";\r\nimport styles from './AppBar.module.css'\r\n\r\nexport default function AppBar() {\r\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n    return(\r\n        <header className={styles.header}>\r\n            <Navigation />\r\n            <div className={styles.nav}>\r\n                {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n            </div>\r\n            \r\n        </header>\r\n    )\r\n}","import { useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport {authSelectors} from '../../../redux/auth';\r\n\r\nexport default function PrivateRoute({ \r\n    children, \r\n    redirectTo,\r\n    ...routeProps }) {\r\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n    return (\r\n        <Route {...routeProps}>\r\n            {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n        </Route>\r\n    );\r\n}","import { useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { authSelectors } from '../../../redux/auth';\r\n\r\nexport default function PublicRoute({ \r\n    component: Component,\r\n    redirectTo,\r\n    children,\r\n    ...routeProps\r\n }) {\r\n    const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n    const shouldRedirect = isLoggedIn && routeProps.restricted;\r\n    return (\r\n        <Route {...routeProps}>\r\n            {shouldRedirect ? <Redirect to={redirectTo}/> : children }\r\n        </Route>\r\n    );\r\n}","import React from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux'; \r\nimport { lazy, Suspense } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport { Switch, Redirect } from 'react-router-dom';\r\nimport { authOperations, authSelectors } from './redux/auth';\r\n\r\nimport './App.css';\r\nimport HomeView from './views/HomeView';\r\nimport AppBar from './Components/Common/AppBar/AppBar';\r\nimport PrivateRoute from './Components/Authorization/PrivateRoute/PrivateRoute';\r\nimport PublicRoute from './Components/Authorization/PublicRoute/PublicRoute';\r\n\r\nconst RegisterView = lazy(() => import('./views/RegisterView.js' /* webpackChunkName: \"RegisterView\"*/),);\r\nconst LoginView = lazy(() => import('./views/LoginView.js' /* webpackChunkName: \"LoginView\"*/),);\r\nconst ContactsView = lazy(() => import('./views/ContactsView.js' /* webpackChunkName: \"ContactsView\"*/),);\r\n// const NotFoundView = lazy(() => import('./views/NotFoundView.js' /* webpackChunkName: \"NotFoundView\"*/),);\r\n\r\nexport default function App() {\r\n  const dispatch = useDispatch();\r\n\r\n  const isFetchingCurrentUser = useSelector(authSelectors.getIsFetchingCurrentUser);\r\n\r\n  useEffect(() => {\r\n    dispatch(authOperations.fetchCurrentUser());\r\n  }, [dispatch]);\r\n\r\n   return ( !isFetchingCurrentUser && (\r\n      <div className=\"App\">        \r\n        <h1 className=\"header\">Phonebook</h1>            \r\n        <AppBar />\r\n        <Suspense fallback={<Loader type=\"ThreeDots\" color=\"brown\" height={80} width={80} />}>\r\n          <Switch>\r\n              <PublicRoute exact path=\"/\">\r\n                <HomeView />\r\n              </PublicRoute>\r\n\r\n              <PublicRoute path=\"/register\" restricted redirectTo=\"/contacts\">\r\n                <RegisterView />\r\n              </PublicRoute>\r\n\r\n              <PublicRoute path=\"/login\" restricted redirectTo=\"/contacts\">\r\n                <LoginView />\r\n              </PublicRoute>\r\n\r\n              <PrivateRoute path=\"/contacts\" redirectTo=\"/login\">\r\n                <ContactsView />\r\n              </PrivateRoute>\r\n\r\n              <PublicRoute>\r\n                <Redirect to=\"/\" />\r\n              </PublicRoute>\r\n          </Switch>\r\n        </Suspense>\r\n      </div>       \r\n  )); \r\n}\r\n\r\n// App.propTypes = {\r\n//   contacts: PropTypes.arrayOf(\r\n//     PropTypes.shape(\r\n//       {\r\n//         id: PropTypes.any.isRequired,\r\n//         name: PropTypes.string.isRequired,\r\n//         number: PropTypes.string.isRequired,\r\n//       })\r\n//   ),\r\n//   totalContacts: PropTypes.number,\r\n// };\r\n\r\n\r\n","// import { combineReducers, createStore } from 'redux';\r\n// import { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport contactsReducer from './phonebook/contacts-reducer';\r\nimport { authReducer } from './auth';\r\nimport { logger } from 'redux-logger';\r\nimport {\r\n    persistStore, \r\n    persistReducer,\r\n    FLUSH,\r\n    REHYDRATE,\r\n    PAUSE,\r\n    PERSIST,\r\n    PURGE,\r\n    REGISTER, \r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\n\r\nconst middleware = [\r\n    ...getDefaultMiddleware({\r\n        serializableCheck: {\r\n            ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n        },\r\n    }), logger, \r\n];\r\n\r\n// const contactsPersistConfig = {\r\n//     key: 'contacts',\r\n//     storage,\r\n//     blacklist: ['filter'],\r\n// };\r\n// const rootReducer = combineReducers({\r\n//     contacts: contactsReducer,\r\n// });\r\n// const store = createStore(rootReducer, composeWithDevTools());\r\n\r\nconst authPersistConfig = {\r\n    key: 'auth',\r\n    storage,\r\n    whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n    reducer: {\r\n        auth: persistReducer(authPersistConfig, authReducer),\r\n        contacts: contactsReducer, \r\n    },\r\n    middleware,    \r\n    devTools: process.env.NODE_ENV === 'development',\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport { store, persistor } from './redux/store';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'modern-normalize/modern-normalize.css';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <PersistGate loading={<h3>Загружаем локальное хранилище</h3>} persistor={persistor}>\r\n        <BrowserRouter>\r\n          <App />\r\n        </BrowserRouter>\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n","import { createAction } from '@reduxjs/toolkit';\r\n\r\nexport const fetchContactRequest = createAction('contacts/fetchContactRequest');\r\nexport const fetchContactSuccess = createAction('contacts/fetchContactSuccess');\r\nexport const fetchContactError = createAction('contacts/fetchContactError');\r\n\r\nexport const addContactRequest = createAction('contacts/addContactRequest');\r\nexport const addContactSuccess = createAction('contacts/addContactSuccess');\r\nexport const addContactError = createAction('contacts/addContactError');\r\n\r\nexport const deleteContactRequest = createAction('contacts/deleteContactRequest');\r\nexport const deleteContactSuccess = createAction('contacts/deleteContactSuccess');\r\nexport const deleteContactError = createAction('contacts/deleteContactError');\r\n\r\nexport const updateContactRequest = createAction('contacts/updateContactRequest');\r\nexport const updateContactSuccess = createAction('contacts/updateContactSuccess');\r\nexport const updateContactError = createAction('contacts/updateContactError');\r\n\r\nexport const changeFilter = createAction('contscts/changeFilter');","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__fnK7o\",\"icon\":\"AuthNav_icon__2YsQm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"Navigation_navigation__3EMnT\",\"link\":\"Navigation_link__3WSIt\",\"icon\":\"Navigation_icon__28BiO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userMenu\":\"UserMenu_userMenu__3yCGd\",\"email\":\"UserMenu_email__SAPrZ\",\"logOutButton\":\"UserMenu_logOutButton__1N1e2\",\"link\":\"UserMenu_link__2f0wr\",\"icon\":\"UserMenu_icon__34VI-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"HomeView_home__amO8X\",\"heading\":\"HomeView_heading__CRRjn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppBar_header__yzypE\"};","import { combineReducers } from \"redux\";\r\nimport { createReducer } from \"@reduxjs/toolkit\";\r\nimport * as actions from './contacts-actions';\r\n\r\nconst { fetchContactRequest, fetchContactSuccess, fetchContactError, addContactRequest, addContactSuccess, addContactError, deleteContactRequest, deleteContactSuccess, deleteContactError, updateContactRequest, updateContactSuccess, updateContactError, changeFilter } = actions;\r\n\r\nconst items = createReducer([], {\r\n    [fetchContactSuccess]: (_, { payload }) => payload,\r\n\r\n    [addContactSuccess]: (state, { payload }) => [...state, payload],\r\n\r\n    [deleteContactSuccess]: (state, { payload }) => state.filter(contact => contact.id !== payload),\r\n    \r\n    [updateContactSuccess]: (state, { payload }) => state.map(contact => contact.name === payload.name ? { ...contact, number: payload.number } : contact )\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n    [fetchContactRequest]: () => true,\r\n    [fetchContactSuccess]: () => false,\r\n    [fetchContactError]: () => false,\r\n    [addContactRequest]: () => true,\r\n    [addContactSuccess]: () => false,\r\n    [addContactError]: () => false,\r\n    [deleteContactRequest]: () => true,\r\n    [deleteContactSuccess]: () => false,\r\n    [deleteContactError]: () => false,\r\n    [updateContactRequest]: () => true,\r\n    [updateContactSuccess]: () => false,\r\n    [updateContactError]: () => false,\r\n})\r\n           \r\nconst filter = createReducer('', {\r\n    [changeFilter]: (_, { payload }) => payload\r\n});\r\n\r\nconst error = createReducer(null, {\r\n    [fetchContactError]: (_, { payload }) => payload,\r\n    [addContactError]: (_, { payload }) => payload,\r\n    [deleteContactError]: (_, { payload }) => payload,\r\n    [updateContactError]: (_, { payload }) => payload,\r\n    [fetchContactRequest]: () => null,\r\n    [addContactRequest]: () => null,\r\n    [deleteContactRequest]: () => null,\r\n    [updateContactRequest]: () => null,\r\n  });\r\n\r\nexport default combineReducers({ items, loading, filter, error });","import axios from \"axios\";\r\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nconst token = {\r\n    set(token) {\r\n        axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n    },\r\n    unset(token) {\r\n        axios.defaults.headers.common.Authorization = '';\r\n    },\r\n};\r\n\r\nconst register = createAsyncThunk('auth/register', async (credentials, thunkAPI) => {\r\n    try {\r\n        const { data } = await axios.post('/users/signup', credentials);\r\n        token.set(data.token);\r\n        return data;\r\n      } catch (error) {\r\n        return thunkAPI.rejectWithValue(error.message);\r\n      }\r\n});\r\n\r\nconst logIn = createAsyncThunk('auth/login', async (credentials, thunkAPI) => {\r\n    try {\r\n        const { data } = await axios.post('/users/login', credentials);\r\n        token.set(data.token);\r\n        return data;\r\n    } catch (error) {\r\n        return thunkAPI.rejectWithValue(error.message);\r\n    }\r\n});\r\n\r\nconst logOut = createAsyncThunk('auth/logout', async (_, thunkAPI) => {\r\n    try {\r\n      await axios.post('/users/logout');\r\n      token.unset();\r\n    } catch (error) {\r\n      return thunkAPI.rejectWithValue(error.message);\r\n    }\r\n  });\r\n  \r\n  const fetchCurrentUser = createAsyncThunk(\r\n    'auth/refresh',\r\n    async (_, thunkAPI) => {\r\n      const state = thunkAPI.getState();\r\n      const persistedToken = state.auth.token;\r\n  \r\n      if (persistedToken === null) {\r\n        return thunkAPI.rejectWithValue('None token');\r\n      }\r\n  \r\n      token.set(persistedToken);\r\n      try {\r\n        const { data } = await axios.get('/users/current');\r\n        return data;\r\n      } catch (error) {\r\n        return thunkAPI.rejectWithValue(error.message);\r\n      }\r\n    },\r\n  );\r\n  \r\n  const operations = {\r\n    register,\r\n    logOut,\r\n    logIn,\r\n    fetchCurrentUser,\r\n  };\r\n  export default operations;","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\n\r\nconst getUserName = state => state.auth.user.name;\r\n\r\nconst getUserEmail = state => state.auth.user.email;\r\n\r\nconst getAuthError = state => state.auth.authError;\r\n\r\nconst getRegError = state => state.auth.regError;\r\n\r\nconst getIsFetchingCurrentUser = state => state.auth.isFetchingCurrentUser;\r\n\r\nconst authSelectors = {\r\n    getIsLoggedIn,\r\n    getUserName,\r\n    getUserEmail,\r\n    getIsFetchingCurrentUser,\r\n    getAuthError,\r\n    getRegError,\r\n};\r\nexport default authSelectors;","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n    user: { name: null, email: null },\r\n    token: null,\r\n    isLoggedIn: false, \r\n    isFetchingCurrentUser: false,\r\n    authError: null,\r\n    regError: null,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState,\r\n    extraReducers: {\r\n        [authOperations.register.fulfilled](state, action) {\r\n            state.user = action.payload.user;\r\n            state.token = action.payload.token;\r\n            state.isLoggedIn = true;\r\n        },\r\n        [authOperations.register.rejected](state, action) {\r\n            state.regError = action.payload;\r\n        },\r\n\r\n        [authOperations.logIn.fulfilled](state, action) {\r\n            state.user = action.payload.user;\r\n            state.token = action.payload.token;\r\n            state.isLoggedIn = true;\r\n        },\r\n        [authOperations.logIn.rejected](state, action) {\r\n            state.authError = action.payload;\r\n          },\r\n\r\n        [authOperations.logOut.fulfilled](state) {\r\n            state.user = { name: null, email: null };\r\n            state.token = null;\r\n            state.isLoggedIn = false;\r\n        },\r\n\r\n        [authOperations.fetchCurrentUser.pending](state) {\r\n            state.isFetchingCurrentUser = true;\r\n          },\r\n        [authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n            state.user = action.payload;\r\n            state.isLoggedIn = true;\r\n            state.isFetchingCurrentUser = false;\r\n        },\r\n        [authOperations.fetchCurrentUser.rejected](state) {\r\n            state.isFetchingCurrentUser = false;\r\n          },\r\n    },\r\n});\r\n\r\nexport default authSlice.reducer;"],"sourceRoot":""}