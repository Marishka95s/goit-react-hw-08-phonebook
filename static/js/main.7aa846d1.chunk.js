(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{106:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(29),o=n.n(a),u=(n(58),n(7)),s=n(49),i=n.n(s),l=n(6),j=n(8),b=(n(99),n(35)),d=n.n(b),O=n.p+"static/media/phonebook.b96dcc85.png",h=n(1);function f(){return Object(h.jsxs)("section",{className:d.a.home,children:[Object(h.jsx)("h2",{className:d.a.heading,children:"Welcome to your most convenient phonebok :)"}),Object(h.jsx)("img",{src:O,alt:"phonebook",width:"300"})]})}var p=n(16),g=n(23),x=n.n(g),m=n(21),v=function(){var e=Object(u.c)(j.c.getIsLoggedIn);return Object(h.jsxs)("nav",{className:x.a.navigation,children:[Object(h.jsxs)(p.b,{to:"/",className:x.a.link,activeClassName:x.a.activeLink,children:[Object(h.jsx)("div",{className:x.a.icon,children:Object(h.jsx)(m.a,{})}),Object(h.jsx)("span",{children:"Home page"})]}),e&&Object(h.jsxs)(p.b,{to:"/contacts",className:x.a.link,activeClassName:x.a.activeLink,children:[Object(h.jsx)("div",{className:x.a.icon,children:Object(h.jsx)(m.c,{})}),Object(h.jsx)("span",{children:"Contacts page"})]})]})},C=n(24),k=n.n(C),_=function(){var e=Object(u.b)(),t=Object(u.c)(j.c.getUserEmail);return Object(h.jsxs)("div",{className:k.a.userMenu,children:[Object(h.jsx)("span",{className:k.a.email,children:t}),Object(h.jsxs)("button",{type:"button",className:k.a.logOutButton,onClick:function(){return e(j.a.logOut())},children:[Object(h.jsx)("div",{className:k.a.icon,children:Object(h.jsx)(m.b,{})}),Object(h.jsx)("p",{className:k.a.link,children:"Log out"})]})]})},N=n(19),y=n.n(N);function E(){return Object(h.jsxs)("div",{children:[Object(h.jsxs)(p.b,{to:"/register",exact:!0,className:y.a.link,activeStyle:y.a.activeLink,children:[Object(h.jsx)("div",{className:y.a.icon,children:Object(h.jsx)(m.d,{})}),Object(h.jsx)("span",{className:y.a.pageName,children:"Registration page"})]}),Object(h.jsxs)(p.b,{to:"/login",exact:!0,className:y.a.link,activeStyle:y.a.activeLink,children:[Object(h.jsx)("div",{className:y.a.icon,children:Object(h.jsx)(m.e,{})}),Object(h.jsx)("span",{className:y.a.pageName,children:"Login page"})]})]})}var I=n(37),U=n.n(I);function w(){var e=Object(u.c)(j.c.getIsLoggedIn);return Object(h.jsxs)("header",{className:U.a.header,children:[Object(h.jsx)(v,{}),Object(h.jsx)("div",{className:U.a.nav,children:e?Object(h.jsx)(_,{}):Object(h.jsx)(E,{})})]})}var S=n(17),L=n(28),R=["children","redirectTo"];function q(e){var t=e.children,n=e.redirectTo,c=Object(L.a)(e,R),r=Object(u.c)(j.c.getIsLoggedIn);return Object(h.jsx)(l.b,Object(S.a)(Object(S.a)({},c),{},{children:r?t:Object(h.jsx)(l.a,{to:n})}))}var F=["component","redirectTo","children"];function M(e){e.component;var t=e.redirectTo,n=e.children,c=Object(L.a)(e,F),r=Object(u.c)(j.c.getIsLoggedIn)&&c.restricted;return Object(h.jsx)(l.b,Object(S.a)(Object(S.a)({},c),{},{children:r?Object(h.jsx)(l.a,{to:t}):n}))}var T=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,120))})),A=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,121))})),V=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,119))}));function z(){var e=Object(u.b)(),t=Object(u.c)(j.c.getIsFetchingCurrentUser);return Object(c.useEffect)((function(){e(j.a.fetchCurrentUser())}),[e]),!t&&Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("h1",{className:"header",children:"Phonebook"}),Object(h.jsx)(w,{}),Object(h.jsx)(c.Suspense,{fallback:Object(h.jsx)(i.a,{type:"ThreeDots",color:"brown",height:80,width:80}),children:Object(h.jsxs)(l.d,{children:[Object(h.jsx)(M,{exact:!0,path:"/",children:Object(h.jsx)(f,{})}),Object(h.jsx)(M,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(h.jsx)(T,{})}),Object(h.jsx)(M,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(h.jsx)(A,{})}),Object(h.jsx)(q,{path:"/contacts",redirectTo:"/login",children:Object(h.jsx)(V,{})}),Object(h.jsx)(M,{children:Object(h.jsx)(l.a,{to:"/"})})]})})]})}var B=n(51),W=n(32),H=n(3),J=n(39),P=n(52),D=n(20),G=n(53),K=n.n(G),Q=[].concat(Object(W.a)(Object(H.f)({serializableCheck:{ignoredActions:[D.a,D.f,D.b,D.c,D.d,D.e]}})),[P.logger]),X={key:"auth",storage:K.a,whitelist:["token"]},Y=Object(H.a)({reducer:{auth:Object(D.g)(X,j.b),contacts:J.a},middleware:Q,devTools:!1}),Z=Object(D.h)(Y);n(104),n(105);o.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(u.a,{store:Y,children:Object(h.jsx)(B.a,{loading:Object(h.jsx)("h3",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435"}),persistor:Z,children:Object(h.jsx)(p.a,{children:Object(h.jsx)(z,{})})})})}),document.getElementById("root"))},11:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchContactRequest",(function(){return r})),n.d(t,"fetchContactSuccess",(function(){return a})),n.d(t,"fetchContactError",(function(){return o})),n.d(t,"addContactRequest",(function(){return u})),n.d(t,"addContactSuccess",(function(){return s})),n.d(t,"addContactError",(function(){return i})),n.d(t,"deleteContactRequest",(function(){return l})),n.d(t,"deleteContactSuccess",(function(){return j})),n.d(t,"deleteContactError",(function(){return b})),n.d(t,"updateContactRequest",(function(){return d})),n.d(t,"updateContactSuccess",(function(){return O})),n.d(t,"updateContactError",(function(){return h})),n.d(t,"changeFilter",(function(){return f}));var c=n(3),r=Object(c.b)("contacts/fetchContactRequest"),a=Object(c.b)("contacts/fetchContactSuccess"),o=Object(c.b)("contacts/fetchContactError"),u=Object(c.b)("contacts/addContactRequest"),s=Object(c.b)("contacts/addContactSuccess"),i=Object(c.b)("contacts/addContactError"),l=Object(c.b)("contacts/deleteContactRequest"),j=Object(c.b)("contacts/deleteContactSuccess"),b=Object(c.b)("contacts/deleteContactError"),d=Object(c.b)("contacts/updateContactRequest"),O=Object(c.b)("contacts/updateContactSuccess"),h=Object(c.b)("contacts/updateContactError"),f=Object(c.b)("contscts/changeFilter")},19:function(e,t,n){e.exports={link:"AuthNav_link__fnK7o",icon:"AuthNav_icon__2YsQm"}},23:function(e,t,n){e.exports={navigation:"Navigation_navigation__3EMnT",link:"Navigation_link__3WSIt",icon:"Navigation_icon__28BiO"}},24:function(e,t,n){e.exports={userMenu:"UserMenu_userMenu__3yCGd",email:"UserMenu_email__SAPrZ",logOutButton:"UserMenu_logOutButton__1N1e2",link:"UserMenu_link__2f0wr",icon:"UserMenu_icon__34VI-"}},35:function(e,t,n){e.exports={home:"HomeView_home__amO8X",heading:"HomeView_heading__CRRjn"}},37:function(e,t,n){e.exports={header:"AppBar_header__yzypE"}},39:function(e,t,n){"use strict";var c,r,a,o=n(2),u=n(17),s=n(32),i=n(9),l=n(3),j=n(11),b=j.fetchContactRequest,d=j.fetchContactSuccess,O=j.fetchContactError,h=j.addContactRequest,f=j.addContactSuccess,p=j.addContactError,g=j.deleteContactRequest,x=j.deleteContactSuccess,m=j.deleteContactError,v=j.updateContactRequest,C=j.updateContactSuccess,k=j.updateContactError,_=j.changeFilter,N=Object(l.d)([],(c={},Object(o.a)(c,d,(function(e,t){return t.payload})),Object(o.a)(c,f,(function(e,t){var n=t.payload;return[].concat(Object(s.a)(e),[n])})),Object(o.a)(c,x,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Object(o.a)(c,C,(function(e,t){var n=t.payload;return e.map((function(e){return e.name===n.name?Object(u.a)(Object(u.a)({},e),{},{number:n.number}):e}))})),c)),y=Object(l.d)(!1,(r={},Object(o.a)(r,b,(function(){return!0})),Object(o.a)(r,d,(function(){return!1})),Object(o.a)(r,O,(function(){return!1})),Object(o.a)(r,h,(function(){return!0})),Object(o.a)(r,f,(function(){return!1})),Object(o.a)(r,p,(function(){return!1})),Object(o.a)(r,g,(function(){return!0})),Object(o.a)(r,x,(function(){return!1})),Object(o.a)(r,m,(function(){return!1})),Object(o.a)(r,v,(function(){return!0})),Object(o.a)(r,C,(function(){return!1})),Object(o.a)(r,k,(function(){return!1})),r)),E=Object(l.d)("",Object(o.a)({},_,(function(e,t){return t.payload}))),I=Object(l.d)(null,(a={},Object(o.a)(a,O,(function(e,t){return t.payload})),Object(o.a)(a,p,(function(e,t){return t.payload})),Object(o.a)(a,m,(function(e,t){return t.payload})),Object(o.a)(a,k,(function(e,t){return t.payload})),Object(o.a)(a,b,(function(){return null})),Object(o.a)(a,h,(function(){return null})),Object(o.a)(a,g,(function(){return null})),Object(o.a)(a,v,(function(){return null})),a));t.a=Object(i.b)({items:N,loading:y,filter:E,error:I})},58:function(e,t,n){},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return p}));var c=n(18),r=n.n(c),a=n(27),o=n(22),u=n.n(o),s=n(3);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var i,l=function(e){u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},j=function(e){u.a.defaults.headers.common.Authorization=""},b=Object(s.c)("auth/register",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/users/signup",t);case 3:return c=e.sent,a=c.data,l(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(s.c)("auth/login",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/users/login",t);case 3:return c=e.sent,a=c.data,l(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),O={register:b,logOut:Object(s.c)("auth/logout",function(){var e=Object(a.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("/users/logout");case 3:j(),e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0.message));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),logIn:d,fetchCurrentUser:Object(s.c)("auth/refresh",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),null!==(a=c.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue("None token"));case 4:return l(a),e.prev=5,e.next=8,u.a.get("/users/current");case 8:return o=e.sent,s=o.data,e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",n.rejectWithValue(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},h={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getUserEmail:function(e){return e.auth.user.email},getIsFetchingCurrentUser:function(e){return e.auth.isFetchingCurrentUser},getAuthError:function(e){return e.auth.authError},getRegError:function(e){return e.auth.regError}},f=n(2),p=Object(s.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1,authError:null,regError:null},extraReducers:(i={},Object(f.a)(i,O.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(f.a)(i,O.register.rejected,(function(e,t){e.regError=t.payload})),Object(f.a)(i,O.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(f.a)(i,O.logIn.rejected,(function(e,t){e.authError=t.payload})),Object(f.a)(i,O.logOut.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(f.a)(i,O.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(f.a)(i,O.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(f.a)(i,O.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1})),i)}).reducer},99:function(e,t,n){}},[[106,4,5]]]);
//# sourceMappingURL=main.7aa846d1.chunk.js.map